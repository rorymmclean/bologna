<!DOCTYPE html>
<meta charset="utf-8" http-equiv="refresh" content="<%= myrefresh %>" />
<html lang="en">
<head>
 <% include partials/head %> 
</head>
<body>
<% include partials/menu %>
<!-- Load d3.js -->
<script src="https://d3js.org/d3.v4.js"></script>

</script>

<div class="divrf">
<form method="post">
Refresh Rate:
<select id ='frddl' name='frddl' value=<%= drfvalue %> onchange="this.form.submit()" >
    <option value='99999999' <%= drfvalue == '99999999' ? 'selected' : ''%>>None</option>
    <option value='10' <%= drfvalue == '10' ? 'selected' : ''%>>10</option>
    <option value='20' <%= drfvalue == '20' ? 'selected' : ''%>>20</option>
    <option value='30' <%= drfvalue == '30' ? 'selected' : ''%>>30</option>
    <option value='60' <%= drfvalue == '60' ? 'selected' : ''%>>60</option>
    <option value='120' <%= drfvalue == '120' ? 'selected' : ''%>>120</option>
    <option value='300' <%= drfvalue == '300' ? 'selected' : ''%>>300</option>
    <option value='900' <%= drfvalue == '900' ? 'selected' : ''%>>900</option>
    <option value='1800' <%= drfvalue == '1800' ? 'selected' : ''%>>1800</option>
    <option value='3600' <%= drfvalue == '3600' ? 'selected' : ''%>>3600</option>
  </select>
  &nbsp;&nbsp;Datapoints: 
  <select id ='datapoints' name='datapoints' value=<%= datapoints %> onchange="this.form.submit()" >
      <option value='20' <%= datapoints == '20' ? 'selected' : ''%>>20</option>
      <option value='50' <%= datapoints == '50' ? 'selected' : ''%>>50</option>
      <option value='100' <%= datapoints == '100' ? 'selected' : ''%>>100</option>
      <option value='200' <%= datapoints == '200' ? 'selected' : ''%>>200</option>
      <option value='300' <%= datapoints == '300' ? 'selected' : ''%>>300</option>
      <option value='500' <%= datapoints == '500' ? 'selected' : ''%>>500</option>
      <option value='1000' <%= datapoints == '1000' ? 'selected' : ''%>>1000</option>
      <option value='2000' <%= datapoints == '2000' ? 'selected' : ''%>>2000</option>
      <option value='5000' <%= datapoints == '5000' ? 'selected' : ''%>>5000</option>
      <option value='10000' <%= datapoints == '10000' ? 'selected' : ''%>>10000</option>
    </select>
  </form>
</div>

<!-- Create a div where the graph will take place -->
<div id="my_dataviz_1">
  <form method="post">
    <select id ='server1' name='server1' value='<%= server1 %>' onchange="this.form.submit()" >
      <%- serverlist1 %>
    </select>
    <select id ='metric1' name='metric1' value='<%= metric1 %>' onchange="this.form.submit()" >
      <option value='IORx' <%= metric1 == 'IORx' ? 'selected' : ''%>>IORx - I/Os Reads</option>
      <option value='IOWx' <%= metric1 == 'IOWx' ? 'selected' : ''%>>IOWx - I/Os Writes</option>
      <option value='IOTx' <%= metric1 == 'IOTx' ? 'selected' : ''%>>IOTx - I/Os Total</option>
      <option value='ByRx' <%= metric1 == 'ByRx' ? 'selected' : ''%>>ByRx - Bytes Reads</option>
      <option value='ByWx' <%= metric1 == 'ByWx' ? 'selected' : ''%>>ByWx - Bytes Writes</option>
      <option value='ByTx' <%= metric1 == 'ByTx' ? 'selected' : ''%>>ByTx - Bytes Totals</option>
      <option value='BSRx' <%= metric1 == 'BSRx' ? 'selected' : ''%>>BSRx - Bytes/Sec Reads</option>
      <option value='BSWx' <%= metric1 == 'BSWx' ? 'selected' : ''%>>BSWx - Bytes/Sec Writes</option>
      <option value='BSTx' <%= metric1 == 'BSTx' ? 'selected' : ''%>>BSTx - Bytes/Sec Total</option>
      <option value='LoadU' <%= metric1 == 'LoadU' ? 'selected' : ''%>>LoadU - CPU Load User</option>
      <option value='LoadS' <%= metric1 == 'LoadS' ? 'selected' : ''%>>LoadS - CPU Load System</option>
      <option value='LoadI' <%= metric1 == 'LoadI' ? 'selected' : ''%>>LoadI - CPU Load Idle</option>
      <option value='NetRx' <%= metric1 == 'NetRx' ? 'selected' : ''%>>NetRx - Net Received Bytes</option>
      <option value='NetTx' <%= metric1 == 'NetTx' ? 'selected' : ''%>>NetTx - Net Transmitted Bytes</option>
      <option value='MemU' <%= metric1 == 'MemU' ? 'selected' : ''%>>MemU - RAM User</option>
      <option value='MemF' <%= metric1 == 'MemF' ? 'selected' : ''%>>MemF - RAM Free</option>
      <option value='LoadIO' <%= metric1 == 'LoadIO' ? 'selected' : ''%>>LoadIO - CPU Load for IOs</option>
      <option value='IORx1' <%= metric1 == 'IORx1' ? 'selected' : ''%>>Disk 1 - I/Os Reads</option>
      <option value='IOWx1' <%= metric1 == 'IOWx1' ? 'selected' : ''%>>Disk 1 - I/Os Writes</option>
      <option value='IOTx1' <%= metric1 == 'IOTx1' ? 'selected' : ''%>>Disk 1 - I/Os Total</option>
      <option value='ByRx1' <%= metric1 == 'ByRx1' ? 'selected' : ''%>>Disk 1 - Bytes Reads</option>
      <option value='ByWx1' <%= metric1 == 'ByWx1' ? 'selected' : ''%>>Disk 1 - Bytes Writes</option>
      <option value='ByTx1' <%= metric1 == 'ByTx1' ? 'selected' : ''%>>Disk 1 - Bytes Totals</option>
      <option value='BSRx1' <%= metric1 == 'BSRx1' ? 'selected' : ''%>>Disk 1 - Bytes/Sec Reads</option>
      <option value='BSWx1' <%= metric1 == 'BSWx1' ? 'selected' : ''%>>Disk 1 - Bytes/Sec Writes</option>
      <option value='Await1' <%= metric1 == 'Await1' ? 'selected' : ''%>>Disk 1 - Await Time </option>
      <option value='Util1' <%= metric1 == 'Util1' ? 'selected' : ''%>>Disk 1 - % CPU Time</option>
      <option value='IORx2' <%= metric1 == 'IORx2' ? 'selected' : ''%>>Disk 2 - I/Os Reads</option>
      <option value='IOWx2' <%= metric1 == 'IOWx2' ? 'selected' : ''%>>Disk 2 - I/Os Writes</option>
      <option value='IOTx2' <%= metric1 == 'IOTx2' ? 'selected' : ''%>>Disk 2 - I/Os Total</option>
      <option value='ByRx2' <%= metric1 == 'ByRx2' ? 'selected' : ''%>>Disk 2 - Bytes Reads</option>
      <option value='ByWx2' <%= metric1 == 'ByWx2' ? 'selected' : ''%>>Disk 2 - Bytes Writes</option>
      <option value='ByTx2' <%= metric1 == 'ByTx2' ? 'selected' : ''%>>Disk 2 - Bytes Totals</option>
      <option value='BSRx2' <%= metric1 == 'BSRx2' ? 'selected' : ''%>>Disk 2 - Bytes/Sec Reads</option>
      <option value='BSWx2' <%= metric1 == 'BSWx2' ? 'selected' : ''%>>Disk 2 - Bytes/Sec Writes</option>
      <option value='Await2' <%= metric1 == 'Await2' ? 'selected' : ''%>>Disk 2 - Await Time </option>
      <option value='Util2' <%= metric1 == 'Util2' ? 'selected' : ''%>>Disk 2 - % CPU Time</option>
      <option value='IORx3' <%= metric1 == 'IORx3' ? 'selected' : ''%>>Disk 3 - I/Os Reads</option>
      <option value='IOWx3' <%= metric1 == 'IOWx3' ? 'selected' : ''%>>Disk 3 - I/Os Writes</option>
      <option value='IOTx3' <%= metric1 == 'IOTx3' ? 'selected' : ''%>>Disk 3 - I/Os Total</option>
      <option value='ByRx3' <%= metric1 == 'ByRx3' ? 'selected' : ''%>>Disk 3 - Bytes Reads</option>
      <option value='ByWx3' <%= metric1 == 'ByWx3' ? 'selected' : ''%>>Disk 3 - Bytes Writes</option>
      <option value='ByTx3' <%= metric1 == 'ByTx3' ? 'selected' : ''%>>Disk 3 - Bytes Totals</option>
      <option value='BSRx3' <%= metric1 == 'BSRx3' ? 'selected' : ''%>>Disk 3 - Bytes/Sec Reads</option>
      <option value='BSWx3' <%= metric1 == 'BSWx3' ? 'selected' : ''%>>Disk 3 - Bytes/Sec Writes</option>
      <option value='Await3' <%= metric1 == 'Await3' ? 'selected' : ''%>>Disk 3 - Await Time </option>
      <option value='Util3' <%= metric1 == 'Util3' ? 'selected' : ''%>>Disk 3 - % CPU Time</option>
    </select>
  </form>    
  <div ID="spinner1" class=<%= spinner1 %> >
    <img src="images/spinner.gif" />
  </div>  
</div>
<div id="my_dataviz_2">
  <form method="post">
    <select id ='server2' name='server2' value='<%= server2 %>' onchange="this.form.submit()" >
      <%- serverlist2 %>
    </select>
    <select id ='metric2' name='metric2' value='<%= metric2 %>' onchange="this.form.submit()" >
        <option value='IORx' <%= metric2 == 'IORx' ? 'selected' : ''%>>IORx - I/Os Reads</option>
        <option value='IOWx' <%= metric2 == 'IOWx' ? 'selected' : ''%>>IOWx - I/Os Writes</option>
        <option value='IOTx' <%= metric2 == 'IOTx' ? 'selected' : ''%>>IOTx - I/Os Total</option>
        <option value='ByRx' <%= metric2 == 'ByRx' ? 'selected' : ''%>>ByRx - Bytes Reads</option>
        <option value='ByWx' <%= metric2 == 'ByWx' ? 'selected' : ''%>>ByWx - Bytes Writes</option>
        <option value='ByTx' <%= metric2 == 'ByTx' ? 'selected' : ''%>>ByTx - Bytes Totals</option>
        <option value='BSRx' <%= metric2 == 'BSRx' ? 'selected' : ''%>>BSRx - Bytes/Sec Reads</option>
        <option value='BSWx' <%= metric2 == 'BSWx' ? 'selected' : ''%>>BSWx - Bytes/Sec Writes</option>
        <option value='BSTx' <%= metric2 == 'BSTx' ? 'selected' : ''%>>BSTx - Bytes/Sec Total</option>
        <option value='LoadU' <%= metric2 == 'LoadU' ? 'selected' : ''%>>LoadU - CPU Load User</option>
        <option value='LoadS' <%= metric2 == 'LoadS' ? 'selected' : ''%>>LoadS - CPU Load System</option>
        <option value='LoadI' <%= metric2 == 'LoadI' ? 'selected' : ''%>>LoadI - CPU Load Idle</option>
        <option value='NetRx' <%= metric2 == 'NetRx' ? 'selected' : ''%>>NetRx - Net Received Bytes</option>
        <option value='NetTx' <%= metric2 == 'NetTx' ? 'selected' : ''%>>NetTx - Net Transmitted Bytes</option>
        <option value='MemU' <%= metric2 == 'MemU' ? 'selected' : ''%>>MemU - RAM User</option>
        <option value='MemF' <%= metric2 == 'MemF' ? 'selected' : ''%>>MemF - RAM Free</option>
        <option value='LoadIO' <%= metric2 == 'LoadIO' ? 'selected' : ''%>>LoadIO - CPU Load for IOs</option>
        <option value='IORx1' <%= metric2 == 'IORx1' ? 'selected' : ''%>>Disk 1 - I/Os Reads</option>
        <option value='IOWx1' <%= metric2 == 'IOWx1' ? 'selected' : ''%>>Disk 1 - I/Os Writes</option>
        <option value='IOTx1' <%= metric2 == 'IOTx1' ? 'selected' : ''%>>Disk 1 - I/Os Total</option>
        <option value='ByRx1' <%= metric2 == 'ByRx1' ? 'selected' : ''%>>Disk 1 - Bytes Reads</option>
        <option value='ByWx1' <%= metric2 == 'ByWx1' ? 'selected' : ''%>>Disk 1 - Bytes Writes</option>
        <option value='ByTx1' <%= metric2 == 'ByTx1' ? 'selected' : ''%>>Disk 1 - Bytes Totals</option>
        <option value='BSRx1' <%= metric2 == 'BSRx1' ? 'selected' : ''%>>Disk 1 - Bytes/Sec Reads</option>
        <option value='BSWx1' <%= metric2 == 'BSWx1' ? 'selected' : ''%>>Disk 1 - Bytes/Sec Writes</option>
        <option value='Await1' <%= metric2 == 'Await1' ? 'selected' : ''%>>Disk 1 - Await Time </option>
        <option value='Util1' <%= metric2 == 'Util1' ? 'selected' : ''%>>Disk 1 - % CPU Time</option>
        <option value='IORx2' <%= metric2 == 'IORx2' ? 'selected' : ''%>>Disk 2 - I/Os Reads</option>
        <option value='IOWx2' <%= metric2 == 'IOWx2' ? 'selected' : ''%>>Disk 2 - I/Os Writes</option>
        <option value='IOTx2' <%= metric2 == 'IOTx2' ? 'selected' : ''%>>Disk 2 - I/Os Total</option>
        <option value='ByRx2' <%= metric2 == 'ByRx2' ? 'selected' : ''%>>Disk 2 - Bytes Reads</option>
        <option value='ByWx2' <%= metric2 == 'ByWx2' ? 'selected' : ''%>>Disk 2 - Bytes Writes</option>
        <option value='ByTx2' <%= metric2 == 'ByTx2' ? 'selected' : ''%>>Disk 2 - Bytes Totals</option>
        <option value='BSRx2' <%= metric2 == 'BSRx2' ? 'selected' : ''%>>Disk 2 - Bytes/Sec Reads</option>
        <option value='BSWx2' <%= metric2 == 'BSWx2' ? 'selected' : ''%>>Disk 2 - Bytes/Sec Writes</option>
        <option value='Await2' <%= metric2 == 'Await2' ? 'selected' : ''%>>Disk 2 - Await Time </option>
        <option value='Util2' <%= metric2 == 'Util2' ? 'selected' : ''%>>Disk 2 - % CPU Time</option>
        <option value='IORx3' <%= metric2 == 'IORx3' ? 'selected' : ''%>>Disk 3 - I/Os Reads</option>
        <option value='IOWx3' <%= metric2 == 'IOWx3' ? 'selected' : ''%>>Disk 3 - I/Os Writes</option>
        <option value='IOTx3' <%= metric2 == 'IOTx3' ? 'selected' : ''%>>Disk 3 - I/Os Total</option>
        <option value='ByRx3' <%= metric2 == 'ByRx3' ? 'selected' : ''%>>Disk 3 - Bytes Reads</option>
        <option value='ByWx3' <%= metric2 == 'ByWx3' ? 'selected' : ''%>>Disk 3 - Bytes Writes</option>
        <option value='ByTx3' <%= metric2 == 'ByTx3' ? 'selected' : ''%>>Disk 3 - Bytes Totals</option>
        <option value='BSRx3' <%= metric2 == 'BSRx3' ? 'selected' : ''%>>Disk 3 - Bytes/Sec Reads</option>
        <option value='BSWx3' <%= metric2 == 'BSWx3' ? 'selected' : ''%>>Disk 3 - Bytes/Sec Writes</option>
        <option value='Await3' <%= metric2 == 'Await3' ? 'selected' : ''%>>Disk 3 - Await Time </option>
        <option value='Util3' <%= metric2 == 'Util3' ? 'selected' : ''%>>Disk 3 - % CPU Time</option>
        </select>
    </form>          
    <div ID="spinner2" class=<%= spinner2 %> >
      <img src="images/spinner.gif" />
    </div>  
  </div>
<div id="my_dataviz_3">
  <form method="post">
    <select id ='server3' name='server3' value='<%= server3 %>' onchange="this.form.submit()" >
      <%- serverlist3 %>
    </select>
    <select id ='metric3' name='metric3' value='<%= metric3 %>' onchange="this.form.submit()" >
        <option value='IORx' <%= metric3 == 'IORx' ? 'selected' : ''%>>IORx - I/Os Reads</option>
        <option value='IOWx' <%= metric3 == 'IOWx' ? 'selected' : ''%>>IOWx - I/Os Writes</option>
        <option value='IOTx' <%= metric3 == 'IOTx' ? 'selected' : ''%>>IOTx - I/Os Total</option>
        <option value='ByRx' <%= metric3 == 'ByRx' ? 'selected' : ''%>>ByRx - Bytes Reads</option>
        <option value='ByWx' <%= metric3 == 'ByWx' ? 'selected' : ''%>>ByWx - Bytes Writes</option>
        <option value='ByTx' <%= metric3 == 'ByTx' ? 'selected' : ''%>>ByTx - Bytes Totals</option>
        <option value='BSRx' <%= metric3 == 'BSRx' ? 'selected' : ''%>>BSRx - Bytes/Sec Reads</option>
        <option value='BSWx' <%= metric3 == 'BSWx' ? 'selected' : ''%>>BSWx - Bytes/Sec Writes</option>
        <option value='BSTx' <%= metric3 == 'BSTx' ? 'selected' : ''%>>BSTx - Bytes/Sec Total</option>
        <option value='LoadU' <%= metric3 == 'LoadU' ? 'selected' : ''%>>LoadU - CPU Load User</option>
        <option value='LoadS' <%= metric3 == 'LoadS' ? 'selected' : ''%>>LoadS - CPU Load System</option>
        <option value='LoadI' <%= metric3 == 'LoadI' ? 'selected' : ''%>>LoadI - CPU Load Idle</option>
        <option value='NetRx' <%= metric3 == 'NetRx' ? 'selected' : ''%>>NetRx - Net Received Bytes</option>
        <option value='NetTx' <%= metric3 == 'NetTx' ? 'selected' : ''%>>NetTx - Net Transmitted Bytes</option>
        <option value='MemU' <%= metric3 == 'MemU' ? 'selected' : ''%>>MemU - RAM User</option>
        <option value='MemF' <%= metric3 == 'MemF' ? 'selected' : ''%>>MemF - RAM Free</option>
        <option value='LoadIO' <%= metric3 == 'LoadIO' ? 'selected' : ''%>>LoadIO - CPU Load for IOs</option>
        <option value='IORx1' <%= metric3 == 'IORx1' ? 'selected' : ''%>>Disk 1 - I/Os Reads</option>
        <option value='IOWx1' <%= metric3 == 'IOWx1' ? 'selected' : ''%>>Disk 1 - I/Os Writes</option>
        <option value='IOTx1' <%= metric3 == 'IOTx1' ? 'selected' : ''%>>Disk 1 - I/Os Total</option>
        <option value='ByRx1' <%= metric3 == 'ByRx1' ? 'selected' : ''%>>Disk 1 - Bytes Reads</option>
        <option value='ByWx1' <%= metric3 == 'ByWx1' ? 'selected' : ''%>>Disk 1 - Bytes Writes</option>
        <option value='ByTx1' <%= metric3 == 'ByTx1' ? 'selected' : ''%>>Disk 1 - Bytes Totals</option>
        <option value='BSRx1' <%= metric3 == 'BSRx1' ? 'selected' : ''%>>Disk 1 - Bytes/Sec Reads</option>
        <option value='BSWx1' <%= metric3 == 'BSWx1' ? 'selected' : ''%>>Disk 1 - Bytes/Sec Writes</option>
        <option value='Await1' <%= metric3 == 'Await1' ? 'selected' : ''%>>Disk 1 - Await Time </option>
        <option value='Util1' <%= metric3 == 'Util1' ? 'selected' : ''%>>Disk 1 - % CPU Time</option>
        <option value='IORx2' <%= metric3 == 'IORx2' ? 'selected' : ''%>>Disk 2 - I/Os Reads</option>
        <option value='IOWx2' <%= metric3 == 'IOWx2' ? 'selected' : ''%>>Disk 2 - I/Os Writes</option>
        <option value='IOTx2' <%= metric3 == 'IOTx2' ? 'selected' : ''%>>Disk 2 - I/Os Total</option>
        <option value='ByRx2' <%= metric3 == 'ByRx2' ? 'selected' : ''%>>Disk 2 - Bytes Reads</option>
        <option value='ByWx2' <%= metric3 == 'ByWx2' ? 'selected' : ''%>>Disk 2 - Bytes Writes</option>
        <option value='ByTx2' <%= metric3 == 'ByTx2' ? 'selected' : ''%>>Disk 2 - Bytes Totals</option>
        <option value='BSRx2' <%= metric3 == 'BSRx2' ? 'selected' : ''%>>Disk 2 - Bytes/Sec Reads</option>
        <option value='BSWx2' <%= metric3 == 'BSWx2' ? 'selected' : ''%>>Disk 2 - Bytes/Sec Writes</option>
        <option value='Await2' <%= metric3 == 'Await2' ? 'selected' : ''%>>Disk 2 - Await Time </option>
        <option value='Util2' <%= metric3 == 'Util2' ? 'selected' : ''%>>Disk 2 - % CPU Time</option>
        <option value='IORx3' <%= metric3 == 'IORx3' ? 'selected' : ''%>>Disk 3 - I/Os Reads</option>
        <option value='IOWx3' <%= metric3 == 'IOWx3' ? 'selected' : ''%>>Disk 3 - I/Os Writes</option>
        <option value='IOTx3' <%= metric3 == 'IOTx3' ? 'selected' : ''%>>Disk 3 - I/Os Total</option>
        <option value='ByRx3' <%= metric3 == 'ByRx3' ? 'selected' : ''%>>Disk 3 - Bytes Reads</option>
        <option value='ByWx3' <%= metric3 == 'ByWx3' ? 'selected' : ''%>>Disk 3 - Bytes Writes</option>
        <option value='ByTx3' <%= metric3 == 'ByTx3' ? 'selected' : ''%>>Disk 3 - Bytes Totals</option>
        <option value='BSRx3' <%= metric3 == 'BSRx3' ? 'selected' : ''%>>Disk 3 - Bytes/Sec Reads</option>
        <option value='BSWx3' <%= metric3 == 'BSWx3' ? 'selected' : ''%>>Disk 3 - Bytes/Sec Writes</option>
        <option value='Await3' <%= metric3 == 'Await3' ? 'selected' : ''%>>Disk 3 - Await Time </option>
        <option value='Util3' <%= metric3 == 'Util3' ? 'selected' : ''%>>Disk 3 - % CPU Time</option>
        </select>
  </form>
  <div ID="spinner3" class=<%= spinner3 %> >
    <img src="images/spinner.gif" />
  </div>  
</div>

<script>

  var dataset1 = [<%= pdata1 %>];
  var dataset2 = [<%= pdata2 %>];
  var dataset3 = [<%= pdata3 %>];

  var parseTime = d3.timeParse("%Y%m%d%H%M%S");

  var data1 = dataset1
    .map(function (d) {
      return {
        date: parseTime(d.ts),
        value: d.metric
      };
    })
    .sort(function (a, b) {
      return d3.ascending(a.date, b.date);
    });
    var data2 = dataset2
    .map(function (d) {
      return {
        date: parseTime(d.ts),
        value: d.metric
      };
    })
    .sort(function (a, b) {
      return d3.ascending(a.date, b.date);
    });
    var data3 = dataset3
    .map(function (d) {
      return {
        date: parseTime(d.ts),
        value: d.metric
      };
    })
    .sort(function (a, b) {
      return d3.ascending(a.date, b.date);
    });

  // set the dimensions and margins of the graph
  var margin = { top: 10, right: 30, bottom: 30, left: 100 },
    width = parseInt(d3.select("#my_dataviz_1").style('width'), 10);
  width = width - margin.left - margin.right,
    height = 200 - margin.top - margin.bottom;

  // append the svg1 object to the body of the page
  var svg1 = d3.select("#my_dataviz_1")
    .append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
    .append("g")
    .attr("transform",
      "translate(" + margin.left + "," + margin.top + ")");

  // Add X axis --> it is a date format
  var x = d3.scaleTime()
    .domain(d3.extent(data1, function (d) { return d.date; }))
    .range([0, width]);
  xAxis = svg1.append("g")
    .attr("transform", "translate(0," + height + ")")
    .call(d3.axisBottom(x));

  // Add Y axis
  var y = d3.scaleLinear()
    .domain([0, d3.max(data1, function (d) { return +d.value; })])
    .range([height, 0]);
  yAxis = svg1.append("g")
    .call(d3.axisLeft(y));

// Add the line
svg1.append("path")
      .datum(data1)
      .attr("fill", "none")
      .attr("stroke", "steelblue")
      .attr("stroke-width", 3)
      .attr("d", d3.line()
        .x(function(d) { return x(d.date) })
        .y(function(d) { return y(d.value) })
        )

  // append the svg2 object to the body of the page
  var svg2 = d3.select("#my_dataviz_2")
    .append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
    .append("g")
    .attr("transform",
      "translate(" + margin.left + "," + margin.top + ")");

  // Add X axis --> it is a date format
  var x = d3.scaleTime()
    .domain(d3.extent(data2, function (d) { return d.date; }))
    .range([0, width]);
  xAxis = svg2.append("g")
    .attr("transform", "translate(0," + height + ")")
    .call(d3.axisBottom(x));

  // Add Y axis
  var y = d3.scaleLinear()
    .domain([0, d3.max(data2, function (d) { return +d.value; })])
    .range([height, 0]);
  yAxis = svg2.append("g")
    .call(d3.axisLeft(y));

  // Add the line
  svg2.append("path")
      .datum(data2)
      .attr("fill", "none")
      .attr("stroke", "steelblue")
      .attr("stroke-width", 3)
      .attr("d", d3.line()
        .x(function(d) { return x(d.date) })
        .y(function(d) { return y(d.value) })
        )

  // append the svg3 object to the body of the page
  var svg3 = d3.select("#my_dataviz_3")
    .append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
    .append("g")
    .attr("transform",
      "translate(" + margin.left + "," + margin.top + ")");

  // Add X axis --> it is a date format
  var x = d3.scaleTime()
    .domain(d3.extent(data3, function (d) { return d.date; }))
    .range([0, width]);
  xAxis = svg3.append("g")
    .attr("transform", "translate(0," + height + ")")
    .call(d3.axisBottom(x));

  // Add Y axis
  var y = d3.scaleLinear()
    .domain([0, d3.max(data3, function (d) { return +d.value; })])
    .range([height, 0]);
  yAxis = svg3.append("g")
    .call(d3.axisLeft(y));

  // Add the line
  svg3.append("path")
      .datum(data3)
      .attr("fill", "none")
      .attr("stroke", "steelblue")
      .attr("stroke-width", 3)
      .attr("d", d3.line()
        .x(function(d) { return x(d.date) })
        .y(function(d) { return y(d.value) })
        )

</script>

<% include partials/script %>
</html>
